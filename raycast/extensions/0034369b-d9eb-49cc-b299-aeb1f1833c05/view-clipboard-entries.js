"use strict";var m=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var S=(r,n)=>{for(var s in n)m(r,s,{get:n[s],enumerable:!0})},k=(r,n,s,d)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of w(n))!A.call(r,i)&&i!==s&&m(r,i,{get:()=>n[i],enumerable:!(d=P(n,i))||d.enumerable});return r};var D=r=>k(m({},"__esModule",{value:!0}),r);var L={};S(L,{default:()=>f});module.exports=D(L);var t=require("@raycast/api"),l=require("react"),c=require("child_process"),e=require("react/jsx-runtime");function f(){let{default_tab:r}=(0,t.getPreferenceValues)(),n="/Applications/CopyQ.app/Contents/MacOS/CopyQ";try{(0,c.execSync)(`${n} tab`,{encoding:"utf8"})}catch{return(0,e.jsx)(t.Detail,{markdown:`CopyQ not found, or CopyQ server not running

Please check that CopyQ is installed properly, and make sure CopyQ server is running.`,actions:(0,e.jsxs)(t.ActionPanel,{children:[(0,e.jsx)(t.Action,{title:"Open Command Preferences",icon:t.Icon.Cog,onAction:t.openExtensionPreferences}),(0,e.jsx)(t.Action.Paste,{title:"Copy Path to Clipboard",content:n})]})})}let[s,d]=(0,l.useState)(r),[i,C]=(0,l.useState)([]);function b(){let o=`"${n}" tab`;return(0,c.execSync)(o,{encoding:"utf8"}).split(`
`).filter(u=>u.trim()!=="").map(u=>u.replace("&",""))}function g(){let o=b();return(0,e.jsx)(t.List.Dropdown,{tooltip:"Select a Tab",defaultValue:r,storeValue:!1,placeholder:"Search Tabs",onChange:a=>d(a),children:o.map(a=>(0,e.jsx)(t.List.Dropdown.Item,{title:a,value:a},a))})}function y(o){let a=`${n} tab ${o} 'separator(String.fromCharCode(0)); read.apply(this, [...Array(size()).keys()])'`;return(0,c.execSync)(a,{encoding:"utf8"}).split("\0")}function h(o,a){let p=`${n} tab ${o} select ${a}`;(0,c.execSync)(p)}return(0,l.useEffect)(()=>{let o=y(s);C(o)},[s]),(0,e.jsx)(t.List,{navigationTitle:"Clipboard Manager",searchBarPlaceholder:"Search Clipboard Contents",searchBarAccessory:(0,e.jsx)(g,{}),isShowingDetail:!0,children:i.map((o,a)=>(0,e.jsx)(t.List.Item,{title:o,actions:(0,e.jsxs)(t.ActionPanel,{children:[(0,e.jsx)(t.Action,{title:"Paste",icon:t.Icon.Clipboard,onAction:()=>{h(s,a),t.Clipboard.paste({text:o})}}),(0,e.jsx)(t.Action.Push,{title:"Preview",icon:t.Icon.Eye,target:(0,e.jsx)(t.Detail,{markdown:o})})]}),detail:(0,e.jsx)(t.List.Item.Detail,{markdown:o})},a))})}
